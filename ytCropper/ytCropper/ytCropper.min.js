function ytCropper(e,t){function p(e){var t="http://gdata.youtube.com/feeds/api/videos/"+i+"?v=2&alt=json";var u=function(){$.ajax({async:false,global:false,url:t,dataType:"jsonp",crossDomain:true,success:function(e){var t=e.entry.media$group.yt$duration.seconds;duration=t;n.trigger("onInfoReady");timeToStop=duration;if(timeToStop>f){s=f;timeToStop=f}else{s=timeToStop}var i=function(){var e=r;if(o&&o.getCurrentTime){r=o.getCurrentTime()}if(r!==e){a(r)}};var u=setInterval(i,100);var a=function(e){n.trigger("onProgress",e);if(e>=timeToStop){o.seekTo($("#ytcropper-slider-range").slider("values",0))}$("#ytcropper-playedPercentage").css("width",e*100/duration+"%")};$("#ytcropper-slider-range").slider({range:true,min:0,max:duration,values:[0,s],slide:function(e,t){if(t.value==t.values[0]){return d(t.value,0)}if(t.value==t.values[1]){return d(t.value,1)}}})}})}()}function v(e){var t=e.data;if(t==YT.PlayerState.PLAYING){n.trigger("onVideoPlay",r)}else if(YT.PlayerState.PAUSED){n.trigger("onVideoPause",r)}else if(t==YT.PlayerState.ENDED){n.trigger("onVideoStop",r)}}function m(e){alert("Ha habido un error con el reproductor. Código de error: "+e.data)}$(e).append('<div id="ytcropper-player"></div><div id="ytcropper-playedHolder"><div id="ytcropper-playedPercentage"></div></div><div id="ytcropper-slider-range"></div>');var n=$(this);var r=0;var i=t.idvid;var s;var o,u,a;if(t.maxRange>t.minRange&&t.minRange>1)var f=t.maxRange,l=t.minRange;else{console.log("The specified range is not valid. Configuring settings by default -> Max: None, Min: 1");var f=9999,l=1}var c=document.createElement("script");c.src="https://www.youtube.com/iframe_api";var h=document.getElementsByTagName("script")[0];h.parentNode.insertBefore(c,h);window.onYouTubeIframeAPIReady=function(){o=new YT.Player("ytcropper-player",{width:t.width,height:t.height,videoId:i,playerVars:{controls:0,showinfo:0,modestbranding:1,wmode:"transparent"},events:{onReady:p,onStateChange:v,onError:m}})};var d=function(e,t){if(t==0){if(e>=0){diferencia=$("#ytcropper-slider-range").slider("values",1)-e;if(diferencia<=l)return false;else{o.seekTo(e,true);n.trigger("onFirstHandleChange",e);if(f!=0)if(diferencia>=f){$("#ytcropper-slider-range").slider("values",1,$("#ytcropper-slider-range").slider("values",1)-(diferencia-f));n.trigger("onSecondHandleChange",$("#ytcropper-slider-range").slider("values",1));timeToStop=$("#ytcropper-slider-range").slider("values",1)}return true}}else{return false}}else if(t==1){if(parseInt(e)<parseInt(duration)){diferencia=e-$("#ytcropper-slider-range").slider("values",0);if(diferencia<l)return false;else{timeToStop=e;n.trigger("onSecondHandleChange",e);if(f!=0)if(diferencia>f){n.trigger("onFirstHandleChange",$("#ytcropper-slider-range").slider("values",0));$("#ytcropper-slider-range").slider("values",0,$("#ytcropper-slider-range").slider("values",0)+(diferencia-f));o.seekTo($("#ytcropper-slider-range").slider("values",0),true)}return true}}else{return false}}};this.getVideoId=function(){return i};this.getDuration=function(){return duration};this.getInitialValue=function(){return $("#ytcropper-slider-range").slider("values",0)};this.getFinalValue=function(){return $("#ytcropper-slider-range").slider("values",1)};this.getCurrentTime=function(){return r};this.getEmbedLink=function(){return"http://www.youtube.com/embed/"+this.getVideoId()+"?start="+this.getInitialValue()+"&end="+this.getFinalValue()};this.setInitialValue=function(e){if(d(e,0)){$("#ytcropper-slider-range").slider("values",0,parseInt(e));return true}else{return false}};this.setFinalValue=function(e){if(d(e,1)){$("#ytcropper-slider-range").slider("values",1,parseInt(e));return true}else{return false}};return this}function showWithTwoDigits(e){return e>9?""+e:"0"+e}function toDefaultTime(e){var t=Math.floor(e/60);var n=e%60;var r=Math.floor(n);return{minutes:t,seconds:r}}