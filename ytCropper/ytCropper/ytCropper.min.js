function ytCropper(e,t,n){function d(e){this.duration=u.getDuration();timeToStop=this.duration;if(timeToStop>l){o=l;timeToStop=l}else{o=timeToStop}e.target.playVideo();var t=function(){var e=i;if(u&&u.getCurrentTime){i=u.getCurrentTime()}if(i!==e){s(i)}};var n=setInterval(t,100);var s=function(e){r.trigger("onProgress",e);if(e>=timeToStop){u.seekTo($("#ytcropper-slider-range").slider("values",0));u.stopVideo()}$("#ytcropper-playedPercentage").css("width",e*100/this.duration+"%")};$("#ytcropper-slider-range").slider({range:true,min:0,max:this.duration,values:[0,o],slide:function(e,t){if(t.value==t.values[0]){return g(t.value,0)}if(t.value==t.values[1]){return g(t.value,1)}}})}function y(e){var t=e.data;if(t==YT.PlayerState.PLAYING){r.trigger("onVideoPlay",i)}else if(YT.PlayerState.PAUSED){r.trigger("onVideoPause",i)}else if(t==YT.PlayerState.ENDED){r.trigger("onVideoStop",i)}}function b(e){alert("Ha habido un error con el reproductor. Código de error: "+e.data)}$(e).append('<div id="ytcropper-player"></div><div id="ytcropper-playedHolder"><div id="ytcropper-playedPercentage"></div></div><div id="ytcropper-slider-range"></div>');var r=$(this);var i=0;var s=t.idvid;var o;var u,a,f;if(t.maxRange>t.minRange&&t.minRange>1)var l=t.maxRange,c=t.minRange;else{console.log("The specified range is not valid. Configuring settings by default -> Max: None, Min: 1");var l=0,c=1}var h=document.createElement("script");h.src="https://www.youtube.com/iframe_api";var p=document.getElementsByTagName("script")[0];p.parentNode.insertBefore(h,p);window.onYouTubeIframeAPIReady=function(){u=new YT.Player("ytcropper-player",{width:t.playerWidth,height:t.playerHeight,videoId:s,playerVars:n,events:{onReady:d,onStateChange:y,onError:b}})};var v=function(e,t){a=mostrarConDosDigitos(e)+":"+mostrarConDosDigitos(t)};var m=function(e,t){f=mostrarConDosDigitos(e)+":"+mostrarConDosDigitos(t)};var g=function(e,t){if(t==0){if(e>=0){diferencia=$("#ytcropper-slider-range").slider("values",1)-e;if(diferencia<=c)return false;else{u.seekTo(e,true);r.trigger("onFirstHandleChange",e);if(l!=0)if(diferencia>=l){$("#ytcropper-slider-range").slider("values",1,$("#ytcropper-slider-range").slider("values",1)-(diferencia-l));r.trigger("onSecondHandleChange",$("#ytcropper-slider-range").slider("values",1));timeToStop=$("#ytcropper-slider-range").slider("values",1)}return true}}else{return false}}else if(t==1){if(e<this.duration){diferencia=e-$("#ytcropper-slider-range").slider("values",0);if(diferencia<c)return false;else{timeToStop=e;r.trigger("onSecondHandleChange",e);if(l!=0)if(diferencia>l){r.trigger("onFirstHandleChange",$("#ytcropper-slider-range").slider("values",0));$("#ytcropper-slider-range").slider("values",0,$("#ytcropper-slider-range").slider("values",0)+(diferencia-l));u.seekTo($("#ytcropper-slider-range").slider("values",0),true)}return true}}else{return false}}};this.getVideoId=function(){return s};this.getInitialValue=function(){return $("#ytcropper-slider-range").slider("values",0)};this.getFinalValue=function(){return $("#ytcropper-slider-range").slider("values",1)};this.getCurrentTime=function(){return i};this.getEmbedLink=function(){return"http://www.youtube.com/embed/"+this.getVideoId()+"?start="+this.getInitialValue()+"&end="+this.getFinalValue()};this.setInitialValue=function(e){if(g(e,0)){$("#ytcropper-slider-range").slider("values",0,e);return true}else{return false}};this.setFinalValue=function(e){if(g(e,1)){$("#ytcropper-slider-range").slider("values",1,e);return true}else{return false}};return this}function showWithTwoDigits(e){return e>9?""+e:"0"+e}function toDefaultTime(e){var t=Math.floor(e/60);var n=e%60;var r=Math.ceil(n);return{minutes:t,seconds:r}}